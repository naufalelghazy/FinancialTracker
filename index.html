<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="theme-color" content="#0f0f23" />
    <meta
      name="description"
      content="Personal Financial Tracker - Track income and expenses"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <title>ğŸ’° Financial Tracker</title>

    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/png" href="icons/icon-192.png" />
    <link rel="apple-touch-icon" href="icons/icon-192.png" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="app-header">
        <div class="header-content">
          <h1>ğŸ’° Financial Tracker</h1>
          <button id="settingsBtn" class="icon-btn" aria-label="Settings">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- Input Page -->
      <main class="main-content page-section" id="inputPage">
        <!-- Transaction Type Toggle -->
        <div class="transaction-toggle">
          <button
            type="button"
            class="toggle-btn active"
            data-type="pengeluaran"
          >
            <span class="toggle-icon">ğŸ“¤</span>
            <span>Keluar</span>
          </button>
          <button type="button" class="toggle-btn" data-type="transfer">
            <span class="toggle-icon">ğŸ”„</span>
            <span>Transfer</span>
          </button>
          <button type="button" class="toggle-btn" data-type="pemasukan">
            <span class="toggle-icon">ğŸ“¥</span>
            <span>Masuk</span>
          </button>
        </div>

        <!-- Transaction Form -->
        <form id="transactionForm" class="transaction-form">
          <!-- Amount Input -->
          <div class="form-group amount-group">
            <label for="amount">Jumlah</label>
            <div class="amount-input-wrapper">
              <span class="currency-prefix">Rp</span>
              <input
                type="text"
                id="amount"
                name="amount"
                placeholder="0"
                inputmode="numeric"
                required
              />
            </div>
          </div>

          <!-- Account Selection (Source) -->
          <div class="form-group" id="accountGroup">
            <label for="account" id="accountLabel">Akun</label>
            <div class="select-wrapper">
              <select id="account" name="account" required>
                 <option value="">Pilih Akun Tujuan</option>
                <option value="CASH">ğŸ’µ CASH</option>
                <option value="BCA">ğŸ”µ BCA</option>
                <option value="MANDIRI">ğŸŸ¡ MANDIRI</option>
                <option value="KROM">ğŸŸ£ KROM</option>
                <option value="JAGO">ğŸŸ¡ JAGO</option>
                <option value="SUPERBANK">ğŸŸ  SUPERBANK</option>
                <option value="SEABANK">ğŸ”µ SEABANK</option>
                <option value="GOPAY">ğŸŸ¢ GOPAY</option>
                <option value="SHOPEEPAY">ğŸŸ  SHOPEEPAY</option>
                <option value="DANA">ğŸ”µ DANA</option>
              </select>
              <span class="select-arrow">â–¼</span>
            </div>
          </div>

          <!-- Destination Account (Transfer Only) -->
          <div class="form-group" id="destAccountGroup" hidden>
            <label for="destAccount">Ke Akun</label>
            <div class="select-wrapper">
              <select id="destAccount" name="destAccount">
                <option value="">Pilih Akun Tujuan</option>
                <option value="CASH">ğŸ’µ CASH</option>
                <option value="BCA">ğŸ”µ BCA</option>
                <option value="MANDIRI">ğŸŸ¡ MANDIRI</option>
                <option value="KROM">ğŸŸ£ KROM</option>
                <option value="JAGO">ğŸŸ¡ JAGO</option>
                <option value="SUPERBANK">ğŸŸ  SUPERBANK</option>
                <option value="SEABANK">ğŸ”µ SEABANK</option>
                <option value="GOPAY">ğŸŸ¢ GOPAY</option>
                <option value="SHOPEEPAY">ğŸŸ  SHOPEEPAY</option>
                <option value="DANA">ğŸ”µ DANA</option>
              </select>
              <span class="select-arrow">â–¼</span>
            </div>
          </div>

          <!-- Category Selection (Hidden for Transfer) -->
          <div class="form-group" id="categoryGroup">
            <label for="category">Kategori</label>
            <div class="select-wrapper">
              <select id="category" name="category" required>
                <option value="">Pilih Kategori</option>
              </select>
              <span class="select-arrow">â–¼</span>
            </div>
          </div>

          <!-- Date Input -->
          <div class="form-group">
            <label for="date">Tanggal</label>
            <input type="date" id="date" name="date" required />
          </div>

          <!-- Notes Input -->
          <div class="form-group">
            <label for="notes"
              >Catatan <span class="optional">(opsional)</span></label
            >
            <textarea
              id="notes"
              name="notes"
              placeholder="Tambahkan catatan..."
              rows="2"
            ></textarea>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="submit-btn" id="submitBtn">
            <span class="btn-text">Simpan Transaksi</span>
            <span class="btn-loader" hidden>
              <svg class="spinner" viewBox="0 0 24 24">
        
              </svg>
            </span>
          </button>
        </form>
      </main>

      <!-- Saldo Page -->
      <section class="main-content page-section" id="saldoPage" hidden>
        <div class="saldo-header">
          <h2>ğŸ’° Saldo Akun</h2>
          <button type="button" class="refresh-btn" id="refreshBalance">
            ğŸ”„ Refresh
          </button>
        </div>
        
        <div class="total-balance-card">
          <span class="total-label">Total Saldo</span>
          <span class="total-amount" id="totalBalance">Rp 0</span>
        </div>
        
        <div class="balance-list" id="balanceList">
          <!-- Balance cards will be inserted here by JavaScript -->
          <div class="loading-placeholder">
            <span>Memuat data...</span>
          </div>
        </div>
      </section>

      <!-- Bottom Navigation -->
      <nav class="bottom-nav">
        <button type="button" class="nav-btn active" data-page="input">
          <span class="nav-icon">ğŸ“</span>
          <span class="nav-label">Input</span>
        </button>
        <button type="button" class="nav-btn" data-page="saldo">
          <span class="nav-icon">ğŸ’°</span>
          <span class="nav-label">Saldo</span>
        </button>
      </nav>

      <!-- Settings Modal -->
      <div id="settingsModal" class="modal" hidden>
        <div class="modal-overlay"></div>
        <div class="modal-content">
          <div class="modal-header">
            <h2>âš™ï¸ Pengaturan</h2>
            <button type="button" class="close-btn" id="closeSettings">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="scriptUrl">Google Apps Script URL</label>
              <input
                type="url"
                id="scriptUrl"
                placeholder="https://script.google.com/macros/s/..."
              />
              <p class="help-text">
                Masukkan URL deployment dari Google Apps Script Anda
              </p>
            </div>
            <button type="button" class="save-settings-btn" id="saveSettings">
              ğŸ’¾ Simpan Pengaturan
            </button>
          </div>
        </div>
      </div>

      <!-- Toast Notification -->
      <div id="toast" class="toast" hidden>
        <span class="toast-icon"></span>
        <span class="toast-message"></span>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
